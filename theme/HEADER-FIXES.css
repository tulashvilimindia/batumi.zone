/* ========================================
   HEADER VISUAL BUGS FIXES
   Version: 1.0.0
   Date: January 17, 2026

   Fixes 10 identified visual bugs in header
   Add this AFTER fancy-frontend-styles.css
   ======================================== */

/* ========================================
   BUG #1: Language Dropdown Clipping
   ISSUE: .fancy-header has overflow-x: hidden which clips dropdown
   FIX: Remove overflow from header, add to inner container only
   ======================================== */

.fancy-header {
    overflow: visible !important;
    overflow-x: visible !important;
}

.fancy-header-inner {
    overflow: visible !important;
}

/* ========================================
   BUG #2: Header Horizontal Scroll
   ISSUE: Content width exceeds container causing scroll
   FIX: Ensure proper width constraints and flex behavior
   ======================================== */

.fancy-header {
    width: 100%;
    max-width: 100%;
}

.fancy-header-inner {
    max-width: 1400px;
    width: 100%;
    margin: 0 auto;
    box-sizing: border-box;
}

/* Prevent body scroll caused by header */
html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

/* ========================================
   BUG #3: Header Actions Overflow on Mobile
   ISSUE: Too many action buttons don't fit in row
   FIX: Allow flex wrap and adjust sizing
   ======================================== */

.header-actions {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    flex-shrink: 1;
    flex-wrap: nowrap;
    min-width: 0;
}

@media (max-width: 768px) {
    .header-actions {
        gap: 0.25rem;
        flex-shrink: 1;
    }

    /* Smaller buttons on mobile to fit all */
    .header-action-btn {
        width: 34px !important;
        height: 34px !important;
        min-width: 34px;
        flex-shrink: 0;
    }

    .header-action-btn svg {
        width: 16px !important;
        height: 16px !important;
    }
}

@media (max-width: 400px) {
    .header-actions {
        gap: 0.125rem;
    }

    .header-action-btn {
        width: 32px !important;
        height: 32px !important;
        min-width: 32px;
        border-radius: 6px !important;
    }

    .header-action-btn svg {
        width: 14px !important;
        height: 14px !important;
    }
}

/* ========================================
   BUG #4: Language Dropdown Z-Index Too Low
   ISSUE: z-index: 100 may be behind modals/overlays
   FIX: Increase z-index for dropdown
   ======================================== */

.lang-dropdown {
    z-index: 10000 !important;
}

.lang-dropdown.active {
    z-index: 10000 !important;
}

/* Ensure header lang switcher is positioned correctly */
.header-lang-switcher {
    position: relative;
    z-index: 1001;
}

/* ========================================
   BUG #5: Dropdown Positioning on Mobile
   ISSUE: right: 0 can push dropdown off-screen
   FIX: Adjust positioning for mobile viewports
   ======================================== */

.lang-dropdown {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    min-width: 150px;
    max-width: calc(100vw - 1rem);
}

@media (max-width: 480px) {
    .lang-dropdown {
        right: -0.5rem;
        min-width: 140px;
    }
}

@media (max-width: 360px) {
    .lang-dropdown {
        right: -1rem;
        min-width: 130px;
    }
}

/* ========================================
   BUG #6: Header Height Constraints
   ISSUE: Height varies unpredictably across viewports
   FIX: Explicit min-height and proper flex alignment
   ======================================== */

.fancy-header-inner {
    min-height: var(--header-height);
    height: auto;
    align-items: center;
    align-content: center;
}

@media (max-width: 768px) {
    .fancy-header-inner {
        min-height: 100px;
        height: auto;
        max-height: 120px;
    }
}

@media (max-width: 480px) {
    .fancy-header-inner {
        min-height: 96px;
        max-height: 114px;
    }
}

/* ========================================
   BUG #7: Box-Sizing Inheritance
   ISSUE: Not all elements inherit box-sizing properly
   FIX: Ensure all header elements use border-box
   ======================================== */

.fancy-header *,
.fancy-header *::before,
.fancy-header *::after {
    box-sizing: border-box;
}

/* ========================================
   BUG #8: Dropdown Arrow Visibility
   ISSUE: SVG arrow may not display correctly
   FIX: Proper SVG styling and fallback
   ======================================== */

.lang-current-flag .dropdown-arrow {
    width: 12px;
    height: 12px;
    flex-shrink: 0;
    transition: transform 0.3s ease;
    color: var(--text-secondary);
    fill: currentColor;
}

.lang-current-flag.active .dropdown-arrow {
    transform: rotate(180deg);
}

/* Ensure dropdown arrow visible in button */
.lang-current-flag {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.25rem !important;
}

@media (max-width: 768px) {
    /* Hide arrow on mobile - just show flag */
    .lang-current-flag .dropdown-arrow {
        display: none !important;
    }
}

/* ========================================
   BUG #9: Flag Emoji Display Issues
   ISSUE: Font-size and line-height not matching
   FIX: Consistent emoji sizing and alignment
   ======================================== */

.lang-current-flag .flag-emoji,
.lang-dropdown-item .flag-emoji {
    font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
    font-style: normal;
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
}

.lang-current-flag .flag-emoji {
    font-size: 20px !important;
    width: 24px !important;
    height: 24px !important;
    line-height: 1 !important;
}

.lang-dropdown-item .flag-emoji {
    font-size: 16px !important;
    width: 20px !important;
    height: 20px !important;
    line-height: 1 !important;
}

@media (max-width: 768px) {
    .lang-current-flag .flag-emoji {
        font-size: 18px !important;
        width: 20px !important;
        height: 20px !important;
    }
}

@media (max-width: 480px) {
    .lang-current-flag .flag-emoji {
        font-size: 16px !important;
        width: 18px !important;
        height: 18px !important;
    }
}

/* ========================================
   BUG #10: Border Radius Inconsistency
   ISSUE: Different border-radius sizes on mobile
   FIX: Consistent border-radius across all buttons
   ======================================== */

.header-action-btn,
.lang-current-flag,
.search-button {
    border-radius: 10px;
}

@media (max-width: 768px) {
    .header-action-btn,
    .lang-current-flag,
    .search-button {
        border-radius: 8px !important;
    }
}

@media (max-width: 480px) {
    .header-action-btn,
    .lang-current-flag,
    .search-button {
        border-radius: 6px !important;
    }
}

/* ========================================
   ADDITIONAL FIXES: Language Dropdown Items
   Ensure all language options are visible
   ======================================== */

.lang-dropdown {
    /* Ensure dropdown shows all items */
    max-height: none !important;
    overflow: visible !important;
}

.lang-dropdown-item {
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem !important;
    padding: 0.625rem 0.75rem !important;
    white-space: nowrap;
}

.lang-dropdown-item .lang-name {
    flex: 1;
    min-width: 0;
}

/* Language flag images */
.lang-dropdown-item img,
.lang-current-flag img {
    width: 20px;
    height: 15px;
    object-fit: cover;
    border-radius: 2px;
    flex-shrink: 0;
}

.lang-current-flag img {
    width: 24px;
    height: 18px;
}

@media (max-width: 768px) {
    .lang-current-flag img {
        width: 20px !important;
        height: 15px !important;
    }
}

@media (max-width: 480px) {
    .lang-current-flag img {
        width: 18px !important;
        height: 14px !important;
    }
}

/* ========================================
   BONUS: Improved Dropdown Animation
   ======================================== */

.lang-dropdown {
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px) scale(0.95);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: top right;
}

.lang-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

/* ========================================
   BONUS: Prevent Text Selection in Header
   ======================================== */

.fancy-header {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.fancy-header input,
.fancy-header textarea {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}

/* ========================================
   FIX: Tag Cloud Alignment
   ISSUE: Tag cloud not aligned with services grid
   FIX: Match container styling from #services-grid
   ======================================== */

.tag-cloud-widget {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 1.5rem;
    box-sizing: border-box;
}

.tag-cloud-widget .widget-title {
    margin-bottom: 1rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary, #1a1a1a);
}

.tag-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: 0.625rem;
    align-items: center;
}

@media (max-width: 768px) {
    .tag-cloud-widget {
        padding: 1rem 1rem;
    }
}

@media (max-width: 480px) {
    .tag-cloud-widget {
        padding: 1rem 0.75rem;
    }
}

/* ========================================
   V19: EXTRA SMALL SCREEN (320px) BREAKPOINT
   ======================================== */

@media (max-width: 320px) {
    .fancy-header-inner {
        padding: 0 0.5rem;
        min-height: 90px;
    }

    .header-logo {
        font-size: 0.9rem;
    }

    .header-logo a {
        max-width: 100px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .header-actions {
        gap: 0.125rem;
    }

    .header-action-btn {
        width: 28px !important;
        height: 28px !important;
        min-width: 28px;
        border-radius: 4px !important;
    }

    .header-action-btn svg {
        width: 12px !important;
        height: 12px !important;
    }

    .search-input {
        font-size: 14px;
        padding: 0.375rem 0.5rem;
        min-width: 0;
    }

    .search-button {
        width: 32px !important;
        height: 32px !important;
        min-width: 32px;
    }

    .lang-current-flag {
        width: 28px !important;
        height: 28px !important;
        min-width: 28px;
    }

    .lang-current-flag .flag-emoji {
        font-size: 14px !important;
    }

    .lang-dropdown {
        min-width: 110px;
        right: -0.75rem;
    }

    .services-grid {
        padding: 0 0.5rem;
    }

    .service-card {
        margin-bottom: 0.75rem;
    }
}

/* ========================================
   V20: FAVICON DARK MODE SUPPORT
   (CSS cannot change favicon, but we can
   prepare for SVG favicon with media query)
   ======================================== */

/* This is informational - actual fix requires
   adding SVG favicon in header.php:
   <link rel="icon" href="favicon.svg" type="image/svg+xml">

   SVG should include:
   <style>
     @media (prefers-color-scheme: dark) {
       .icon-bg { fill: #1a1a2e; }
       .icon-fg { fill: #ffffff; }
     }
   </style>
*/

/* ========================================
   ADDITIONAL RESPONSIVE IMPROVEMENTS
   ======================================== */

/* Ensure touch targets are large enough */
@media (max-width: 768px) {
    .header-action-btn,
    .lang-current-flag,
    .search-button,
    .favorite-btn,
    .btn {
        min-height: 44px;
        min-width: 44px;
    }

    .lang-dropdown-item {
        min-height: 44px;
        display: flex;
        align-items: center;
    }
}

/* Fix iOS zoom on input focus */
@media (max-width: 768px) {
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="search"],
    input[type="password"],
    input[type="number"],
    textarea,
    select {
        font-size: 16px !important; /* Prevents iOS zoom */
    }
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
    .fancy-header {
        padding-left: max(1rem, env(safe-area-inset-left));
        padding-right: max(1rem, env(safe-area-inset-right));
    }

    .site-footer {
        padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
}

/* ========================================
   V3 FIX: Service Card Hover Jumpy
   ISSUE: transform: translateY causes layout shift
   FIX: Add will-change and backface-visibility
   ======================================== */

.service-card {
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0); /* Force GPU acceleration */
}

.service-card:hover {
    transform: translateY(-8px) translateZ(0);
}

/* ========================================
   V5 FIX: Search Input White in Dark Mode
   ISSUE: Header search input has white background in dark mode
   FIX: Add dark mode styles for search input
   ======================================== */

[data-theme="dark"] .header-search input,
[data-theme="dark"] .search-form input[type="search"],
[data-theme="dark"] .search-form input[type="text"],
[data-theme="dark"] .fancy-header input[type="search"],
[data-theme="dark"] .fancy-header input[type="text"],
[data-theme="dark"] .header-search-input {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #e8e8e8 !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
}

[data-theme="dark"] .header-search input::placeholder,
[data-theme="dark"] .search-form input::placeholder,
[data-theme="dark"] .fancy-header input::placeholder {
    color: rgba(255, 255, 255, 0.5) !important;
}

[data-theme="dark"] .header-search input:focus,
[data-theme="dark"] .search-form input:focus,
[data-theme="dark"] .fancy-header input:focus {
    background-color: rgba(255, 255, 255, 0.15) !important;
    border-color: #667eea !important;
    outline: none;
}

/* ========================================
   V6 FIX: Language Dropdown Clips on 320px
   ISSUE: On 320px screens, dropdown gets cut off
   FIX: Adjust dropdown position and width for tiny screens
   ======================================== */

@media (max-width: 320px) {
    .language-dropdown,
    .lang-dropdown,
    .language-switcher-dropdown {
        position: fixed !important;
        left: 10px !important;
        right: 10px !important;
        width: calc(100% - 20px) !important;
        max-width: none !important;
        transform: none !important;
    }

    .language-switcher,
    .lang-switcher {
        position: static !important;
    }
}

/* ========================================
   V7 FIX: Focus Outline Invisible on Blue Buttons
   ISSUE: Blue focus outline invisible on blue buttons
   FIX: Use white/offset outline on dark/blue backgrounds
   ======================================== */

.btn-primary:focus-visible,
.btn-cta:focus-visible,
button[type="submit"]:focus-visible,
.submit-btn:focus-visible,
a.btn-primary:focus-visible {
    outline: 3px solid #ffffff !important;
    outline-offset: 2px !important;
    box-shadow: 0 0 0 6px rgba(102, 126, 234, 0.3) !important;
}

[data-theme="dark"] *:focus-visible {
    outline-color: #ffffff !important;
}

/* Ensure all interactive elements have visible focus */
a:focus-visible,
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
    outline: 3px solid #667eea !important;
    outline-offset: 2px !important;
}

/* ========================================
   V8 FIX: Toast Notifications Z-Index Issue
   ISSUE: Toasts appear behind modals
   FIX: Increase toast z-index above modal
   ======================================== */

.toast,
.toast-container,
.notification-toast,
.alert-toast,
#toast-container,
.toasts-wrapper {
    z-index: 999999 !important;
    position: fixed !important;
}

/* Ensure modals have lower z-index than toasts */
.modal,
.modal-backdrop,
.modal-overlay,
.report-modal {
    z-index: 99999 !important;
}

.modal.show,
.modal.active {
    z-index: 99999 !important;
}

/* ========================================
   V9 FIX: Skeleton Loading State
   ISSUE: No loading skeleton when fetching services
   FIX: Add skeleton loading CSS with animation
   ======================================== */

/* Skeleton base styles */
.skeleton,
.skeleton-loader,
.loading-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: 4px;
}

@keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Dark mode skeleton */
[data-theme="dark"] .skeleton,
[data-theme="dark"] .skeleton-loader,
[data-theme="dark"] .loading-skeleton {
    background: linear-gradient(90deg, #2a2a4a 25%, #3a3a5a 50%, #2a2a4a 75%);
    background-size: 200% 100%;
}

/* Service card skeleton */
.service-card-skeleton {
    background: var(--bg-primary, #fff);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.service-card-skeleton .skeleton-image {
    width: 100%;
    padding-top: 66.67%;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
}

.service-card-skeleton .skeleton-content {
    padding: 16px;
}

.service-card-skeleton .skeleton-title {
    height: 20px;
    width: 80%;
    margin-bottom: 12px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: 4px;
}

.service-card-skeleton .skeleton-text {
    height: 14px;
    width: 60%;
    margin-bottom: 8px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: 4px;
}

.service-card-skeleton .skeleton-price {
    height: 24px;
    width: 40%;
    margin-top: 12px;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s infinite;
    border-radius: 4px;
}

/* Dark mode service card skeleton */
[data-theme="dark"] .service-card-skeleton {
    background: #1e1e3f;
}

[data-theme="dark"] .service-card-skeleton .skeleton-image,
[data-theme="dark"] .service-card-skeleton .skeleton-title,
[data-theme="dark"] .service-card-skeleton .skeleton-text,
[data-theme="dark"] .service-card-skeleton .skeleton-price {
    background: linear-gradient(90deg, #2a2a4a 25%, #3a3a5a 50%, #2a2a4a 75%);
    background-size: 200% 100%;
}

/* Loading spinner fallback */
.loading-spinner {
    display: inline-block;
    width: 40px;
    height: 40px;
    border: 3px solid rgba(102, 126, 234, 0.2);
    border-radius: 50%;
    border-top-color: #667eea;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ========================================
   V10 FIX: Print Stylesheet Complete
   ISSUE: Print view shows header gradients
   FIX: Comprehensive print styles
   ======================================== */

@media print {
    /* Hide non-essential elements */
    .fancy-header,
    .site-header,
    .site-footer,
    .mobile-menu,
    .mobile-nav,
    nav,
    .sidebar,
    .ad-container,
    .toast-container,
    .modal,
    .share-buttons,
    .related-services,
    .comments-area,
    button,
    .btn,
    .search-form {
        display: none !important;
    }

    /* Reset backgrounds and colors */
    body,
    .site-content,
    .service-card,
    .main-content,
    article {
        background: white !important;
        color: black !important;
        box-shadow: none !important;
    }

    /* Ensure text is readable */
    * {
        color: black !important;
        background: transparent !important;
    }

    /* Show URLs after links */
    a[href]:after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666 !important;
    }

    a[href^="#"]:after,
    a[href^="javascript"]:after {
        content: "";
    }

    /* Page break handling */
    h1, h2, h3, h4 {
        page-break-after: avoid;
    }

    img, .service-card {
        page-break-inside: avoid;
    }

    /* Ensure full width */
    .container,
    .site-content,
    .main-content {
        width: 100% !important;
        max-width: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }
}

/* ========================================
   V11 FIX: Gallery Lightbox Styles
   ISSUE: Clicking gallery image does nothing
   FIX: Add lightbox-ready styles
   ======================================== */

.gallery-lightbox,
.service-gallery-lightbox {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 999999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}

.gallery-lightbox.active,
.service-gallery-lightbox.active {
    opacity: 1;
    visibility: visible;
}

.gallery-lightbox img {
    max-width: 90vw;
    max-height: 90vh;
    object-fit: contain;
}

.gallery-lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gallery-lightbox-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Make gallery images clickable */
.service-gallery img,
.gallery-item img {
    cursor: pointer;
    transition: transform 0.2s;
}

.service-gallery img:hover,
.gallery-item img:hover {
    transform: scale(1.02);
}

/* ========================================
   V12 FIX: Form Validation Styled
   ISSUE: Browser default validation popups
   FIX: Custom validation styles
   ======================================== */

/* Invalid state */
input:invalid:not(:placeholder-shown),
select:invalid:not(:placeholder-shown),
textarea:invalid:not(:placeholder-shown) {
    border-color: #e74c3c !important;
    background-color: rgba(231, 76, 60, 0.05);
}

/* Valid state */
input:valid:not(:placeholder-shown),
select:valid:not(:placeholder-shown),
textarea:valid:not(:placeholder-shown) {
    border-color: #27ae60;
}

/* Custom validation message */
.validation-message,
.field-error {
    color: #e74c3c;
    font-size: 0.85rem;
    margin-top: 4px;
    display: block;
}

/* Dark mode validation */
[data-theme="dark"] input:invalid:not(:placeholder-shown),
[data-theme="dark"] select:invalid:not(:placeholder-shown),
[data-theme="dark"] textarea:invalid:not(:placeholder-shown) {
    border-color: #ff6b6b !important;
    background-color: rgba(255, 107, 107, 0.1);
}

[data-theme="dark"] .validation-message,
[data-theme="dark"] .field-error {
    color: #ff6b6b;
}

/* ========================================
   V13 FIX: Empty State Icon Larger
   ISSUE: "No results" icon is 64px, should be larger
   FIX: Increase empty state icon size
   ======================================== */

.empty-state-icon,
.no-results-icon,
.empty-icon {
    width: 120px !important;
    height: 120px !important;
    margin: 0 auto 24px;
    opacity: 0.6;
}

.empty-state-icon svg,
.no-results-icon svg,
.empty-icon svg {
    width: 100%;
    height: 100%;
}

.empty-state,
.no-results {
    text-align: center;
    padding: 60px 20px;
}

.empty-state h3,
.no-results h3 {
    font-size: 1.5rem;
    margin-bottom: 12px;
}

.empty-state p,
.no-results p {
    color: #666;
    font-size: 1rem;
}

[data-theme="dark"] .empty-state p,
[data-theme="dark"] .no-results p {
    color: #aaa;
}

/* ========================================
   V14 FIX: Category Cards Count Badge
   ISSUE: Homepage categories don't show service count
   FIX: Style count badges on category cards
   ======================================== */

.category-card {
    position: relative;
}

.category-count,
.service-count-badge {
    position: absolute;
    top: 12px;
    right: 12px;
    background: rgba(102, 126, 234, 0.9);
    color: white;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    min-width: 28px;
    text-align: center;
}

[data-theme="dark"] .category-count,
[data-theme="dark"] .service-count-badge {
    background: rgba(102, 126, 234, 0.8);
}

/* ========================================
   V15 FIX: Pagination Dark Mode Styled
   ISSUE: Pagination buttons white in dark mode
   FIX: Dark mode pagination styles
   ======================================== */

[data-theme="dark"] .pagination,
[data-theme="dark"] .nav-links,
[data-theme="dark"] .page-numbers {
    background-color: transparent;
}

[data-theme="dark"] .page-numbers,
[data-theme="dark"] .pagination a,
[data-theme="dark"] .pagination span {
    background-color: #2a2a4a !important;
    color: #e8e8e8 !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] .page-numbers:hover,
[data-theme="dark"] .pagination a:hover {
    background-color: #3a3a5a !important;
    color: #fff !important;
}

[data-theme="dark"] .page-numbers.current,
[data-theme="dark"] .pagination .current {
    background-color: #667eea !important;
    color: #fff !important;
    border-color: #667eea !important;
}

/* ========================================
   V16 FIX: Contact Buttons Full Width Mobile
   ISSUE: Call/WhatsApp buttons don't span full width
   FIX: Full width contact buttons on mobile
   ======================================== */

@media (max-width: 480px) {
    .contact-buttons,
    .service-contact-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .contact-buttons a,
    .contact-buttons button,
    .service-contact-buttons a,
    .service-contact-buttons button,
    .btn-call,
    .btn-whatsapp,
    .btn-message {
        width: 100% !important;
        display: flex !important;
        justify-content: center;
        align-items: center;
        padding: 14px 20px !important;
        font-size: 1rem;
    }
}

/* ========================================
   V17 FIX: Tag Cloud Hover Consistent
   ISSUE: Some tags have hover effect, others don't
   FIX: Consistent tag hover styles
   ======================================== */

.tag-cloud a,
.service-tags a,
.tags a,
.tag-link {
    display: inline-block;
    padding: 6px 14px;
    margin: 4px;
    background: #f0f0f0;
    border-radius: 20px;
    color: #333;
    text-decoration: none;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.tag-cloud a:hover,
.service-tags a:hover,
.tags a:hover,
.tag-link:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
}

[data-theme="dark"] .tag-cloud a,
[data-theme="dark"] .service-tags a,
[data-theme="dark"] .tags a,
[data-theme="dark"] .tag-link {
    background: #2a2a4a;
    color: #e8e8e8;
}

[data-theme="dark"] .tag-cloud a:hover,
[data-theme="dark"] .service-tags a:hover,
[data-theme="dark"] .tags a:hover,
[data-theme="dark"] .tag-link:hover {
    background: #667eea;
    color: white;
}

/* ========================================
   V18 FIX: Dark Mode Aware Favicon (CSS approach)
   ISSUE: Same favicon in both modes
   FIX: Use CSS to swap favicon based on color scheme
   NOTE: Full implementation requires SVG favicon with embedded media query
   ======================================== */

/* This provides guidance - actual favicon should be SVG with:
   <svg>
     <style>
       @media (prefers-color-scheme: dark) {
         .icon-bg { fill: #1a1a2e; }
         .icon-fg { fill: #667eea; }
       }
     </style>
   </svg>
*/

/* Hide light favicon in dark mode if both exist */
@media (prefers-color-scheme: dark) {
    link[rel="icon"][data-mode="light"] {
        display: none;
    }
}

@media (prefers-color-scheme: light) {
    link[rel="icon"][data-mode="dark"] {
        display: none;
    }
}

/* ========================================
   V19 FIX: Firefox Scrollbar Styling
   ISSUE: Custom scrollbar only works in Chrome/Safari
   FIX: Add Firefox-specific scrollbar styles
   ======================================== */

/* Firefox scrollbar */
* {
    scrollbar-width: thin;
    scrollbar-color: #667eea #f0f0f0;
}

[data-theme="dark"] * {
    scrollbar-color: #667eea #1a1a2e;
}

/* WebKit scrollbar (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #5a6fd6;
}

/* Dark mode scrollbar */
[data-theme="dark"] ::-webkit-scrollbar-track {
    background: #1a1a2e;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: #667eea;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: #7b8ff0;
}

/* ========================================
   V20 FIX: Safari Line Clamp
   ISSUE: Service descriptions overflow instead of truncating
   FIX: Add Safari-compatible line clamp
   ======================================== */

/* Standard line clamp with Safari fallback */
.line-clamp-2,
.service-card-description,
.service-excerpt {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    /* Fallback for older browsers */
    max-height: 3em;
    line-height: 1.5em;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: 4.5em;
    line-height: 1.5em;
}

.line-clamp-4 {
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: 6em;
    line-height: 1.5em;
}

/* Safari-specific fix using @supports */
@supports (-webkit-touch-callout: none) {
    .line-clamp-2,
    .service-card-description,
    .service-excerpt {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        -webkit-line-clamp: 3;
    }

    .line-clamp-4 {
        -webkit-line-clamp: 4;
    }
}

/* Ensure text doesn't break words awkwardly */
.service-card-description,
.service-excerpt,
[class*="line-clamp"] {
    word-break: break-word;
    hyphens: auto;
}

/* ========================================
   LANGUAGE SWITCHER - FLAGS ONLY (NO TEXT)
   ======================================== */

.lang-dropdown-item .lang-name,
.lang-dropdown .lang-name,
.header-lang-switcher .lang-name {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
}

.lang-dropdown-item {
    justify-content: center !important;
    padding: 0.5rem !important;
    min-width: auto !important;
}

.lang-dropdown {
    min-width: auto !important;
    padding: 0.375rem !important;
}

/* ========================================
   END OF HEADER FIXES
   ======================================== */
